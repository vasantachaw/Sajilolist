{% extends "auth/layout.html" %}
{% load static %}
{% block title1 %}Forgot Password{% endblock %}  {% block title2 %}{{companyinfo.name}}{% endblock %}
{% block form_title %}forgot{% endblock %}
{% block main_content %}
    <!-- LOGIN FORM -->
<form action="{% url 'forgot-password' %}" method="post" class="login-form" autocomplete="off" id="forgotPasswordForm">
  {% csrf_token %}
  
  <div class="input-box mt-5">
      <input type="tel" class="input-field" id="log-phone" name="phone" maxlength="10" inputmode="numeric" required>
      <label for="log-phone" class="label">Phone</label>
      <i class='bx bx-phone icon'></i>
  </div>

  <div class="input-box mt-4">
      <button type="submit" class="btn-submit w-100" id="SignInBtn">
          Send OTP <i class='bx bx-key'></i>
      </button>
  </div>

  <div class="text-center">
      <a href="#" class="text-decoration-none">Go to back</a>
  </div>
</form>

<script>
document.getElementById("forgotPasswordForm").addEventListener("submit", function(event) {
    const phoneInput = document.getElementById("log-phone").value.trim();

    // Nepal NTC/Ncell pattern
    const nepalPattern = /^(98[04568]|981|982)\d{7}$/;

    // USA pattern: starts with 2-9, followed by 9 digits
    const usaPattern = /^[2-9]\d{9}$/;

    if (!(nepalPattern.test(phoneInput) || usaPattern.test(phoneInput))) {
        event.preventDefault();
        alert("Please enter a valid NTC/Ncell (Nepal) or US 10-digit phone number.");
        document.getElementById("log-phone").focus();
    }
});
</script>




{% endblock %}